GlobalSpinnerContext 생성: createContext를 사용해 GlobalSpinnerContext라는 새로운 컨텍스트를 생성합니다. 이 컨텍스트는 boolean 값(false)을 기본값으로 가집니다. 이 값은 글로벌 스피너가 활성화되어 있는지 여부를 나타내는 상태값입니다.

GlobalSpinnerActionsContext 생성: 이것도 마찬가지로 새로운 컨텍스트를 생성합니다. 하지만, 이 컨텍스트는 상태를 설정하는 함수(React.Dispatch<React.SetStateAction<boolean>>)를 기본값으로 가집니다. 이 함수는 글로벌 스피너의 상태를 변경하기 위해 사용됩니다.

useGlobalSpinnerContext 훅: 이 훅은 GlobalSpinnerContext에서 현재의 글로벌 스피너 상태값(boolean)을 가져올 때 사용됩니다. useContext 훅을 이용해 현재 컨텍스트의 값을 읽어옵니다.

useGlobalSpinnerActionsContext 훅: 이 훅은 GlobalSpinnerActionsContext에서 상태 설정 함수를 가져올 때 사용됩니다. 이 함수를 사용하면 글로벌 스피너의 상태를 변경할 수 있습니다.

요약하자면, 이 코드는 글로벌 스피너의 활성화 상태를 전역적으로 관리하기 위해 두 개의 컨텍스트를 생성하고, 각각의 컨텍스트를 사용하기 위한 훅을 제공합니다. 이를 통해 React 애플리케이션의 여러 컴포넌트들이 스피너의 상태를 공유하고 변경할 수 있게 됩니다.

GlobalSpinnerContext와 GlobalSpinnerActionsContext를 두 개의 별도 컨텍스트로 나누어 관리하는 이유는 주로 성능 최적화와 관심사의 분리에 있습니다.

성능 최적화: React에서 컨텍스트 값이 변경될 때마다 해당 컨텍스트를 사용하는 모든 컴포넌트들이 리렌더링됩니다. 상태값(isGlobalSpinnerOn)과 해당 상태를 변경하는 함수(setIsGlobalSpinnerOn)를 하나의 컨텍스트에 넣게 되면, 상태가 변경될 때마다 상태 변경 함수도 함께 포함된 모든 컴포넌트가 리렌더링됩니다. 이는 필요 이상의 리렌더링을 유발할 수 있습니다. 상태와 상태 변경 함수를 분리함으로써, 상태 변경 함수가 필요하지 않은 컴포넌트는 상태 변경 시에 불필요하게 리렌더링되지 않게 할 수 있습니다.

관심사의 분리: 상태값과 상태를 변경하는 로직을 분리함으로써 코드의 관리가 용이해집니다. 컴포넌트가 단순히 상태값을 읽기만 필요한 경우와 상태를 변경해야 하는 경우를 명확히 구분할 수 있습니다. 이렇게 함으로써 코드의 가독성과 유지 보수성이 향상됩니다.

결론적으로, 두 개의 컨텍스트를 사용함으로써 각 컴포넌트가 필요로 하는 최소한의 정보만을 구독하게 되어 성능과 코드 관리 측면에서 이점을 얻을 수 있습니다. 이는 큰 규모의 애플리케이션에서 특히 중요한 점입니다.
